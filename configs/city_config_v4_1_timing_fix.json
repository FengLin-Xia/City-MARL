{
  "simulation": {
    "total_months": 30
  },
  "city": {
    "map_size": [
      200,
      200
    ],
    "trunk_road": [],
    "transport_hubs": [
      [
        122,
        80
      ],
      [
        112,
        121
      ]
    ]
  },
  "budget_system": {
    "enabled": true,
    "mode": "soft_constraint",
    "initial_budgets": {
      "IND": 15000,
      "EDU": 10000,
      "Council": 8000
    },
    "debt_penalty_coef": 0.1,
    "max_debt": -2000,
    "monthly_grant": 0,
    "bankruptcy_threshold": -5000,
    "bankruptcy_penalty": -100.0,
    "budget_in_observation": true,
    "normalize_budget": true,
    "budget_norm_range": [
      -2000,
      10000
    ]
  },
  "solver": {
    "mode": "rl",
    "rl": {
      "algo": "mappo",
      "agents": [
        "IND",
        "EDU",
        "Council"
      ],
      "clip_eps": 0.15,
      "gamma": 0.99,
      "gae_lambda": 0.8,
      "ent_coef": 0.01,
      "vf_coef": 0.1,
      "K_epochs": 2,
      "num_epochs": 8,
      "rollout_steps": 20,
      "mini_batch_size": 32,
      "max_updates": 10,
      "mask_illegal_actions": true,
      "cooperation_lambda": 0.0,
      "seed": 42,
      "eval_every": 2,
      "save_every": 2,
      "model_save_path": "models/v4_1_rl/",
      "log_path": "logs/v4_1_rl/",
      "eval_seed_set": [
        42,
        123
      ],
      "experiment_name": "baseline_v1",
      "keep_last_n_models": 5,
      "temperature": 1.0,
      "entropy_coef": 0.01,
      "actor_lr": 0.0003,
      "critic_lr": 0.0003,
      "reward_scale": 30000.0,
      "reward_clip": 1.0,
      "expected_lifetime": 12,
      "expansion_policy": {
        "type": "nearest_k",
        "temperature": 1.0,
        "rule": "euclidean",
        "k": 3
      }
    }
  },
  "gaussian_land_price_system": {
    "meters_per_pixel": 2.0,
    "hub_sigma_base_m": 32,
    "road_sigma_base_m": 20,
    "hub_peak_value": 1.0,
    "road_peak_value": 0.6,
    "min_threshold": 0.04,
    "alpha_inertia": 0.25,
    "hub_growth_rate": 0.03,
    "road_growth_rate": 0.02,
    "max_hub_multiplier": 2.0,
    "max_road_multiplier": 2.5,
    "extra_hub_point_peak": 1.2,
    "extra_hub_point_sigma_px": 6.0,
    "fusion_mode": "weighted_sum",
    "fusion_weights": {
      "hub": 0.8,
      "road": 0.4,
      "river": 0.8,
      "build": 0.2
    },
    "component_normalize": true,
    "fusion_normalize": "minmax",
    "building_kernel": {
      "enabled": true,
      "peak_value": 0.08,
      "sigma_px": 4.0,
      "weight": 1.0,
      "types": [
        "public",
        "industrial"
      ]
    }
  },
  "land_price_evolution": {
    "enabled": true,
    "road_activation_month": 0,
    "road_peak_value": 0.7,
    "hub_activation_month": 7,
    "hub_growth_duration_months": 6,
    "hub_initial_peak": 0.7,
    "hub_final_peak": 1.0,
    "hub3_keep_existing": true,
    "growth_curve_type": "smooth",
    "smooth_curve_steepness": 10.0
  },
  "growth_v4_1": {
    "hubs": {
      "mode": "explicit",
      "candidate_mode": "cumulative",
      "tol": 0.5,
      "list": [
        {
          "id": "hub1",
          "x": 122,
          "y": 80,
          "R0": 5,
          "dR": 1.5,
          "weight": 0.5
        },
        {
          "id": "hub2",
          "x": 112,
          "y": 121,
          "R0": 2,
          "dR": 1.5,
          "weight": 0.5
        }
      ]
    },
    "slots": {
      "source": "file",
      "path": "slots_with_angle.txt",
      "adjacency": "4-neighbor",
      "filters": {
        "respect_terrain": true,
        "respect_roads": true
      }
    },
    "enumeration": {
      "turn_based": true,
      "first_agent": "IND",
      "length_max": 3,
      "use_skip": true,
      "custom_execution_order": {
        "enabled": true,
        "pattern": "IND_single_EDU_Council_pair",
        "description": "IND单月执行，EDU和Council双月同时执行"
      },
      "search_mode": "exhaustive",
      "beam_width": 50,
      "max_expansions": 30000,
      "caps": {
        "top_slots_per_agent_size": {
          "EDU": {
            "S": 150,
            "M": 150,
            "L": 150
          },
          "Council": {
            "A": 120,
            "B": 120,
            "C": 120
          },
          "IND": {
            "L": 60
          }
        },
        "max_actions_per_agent_size": {
          "EDU": {
            "S": 600,
            "M": 400,
            "L": 300,
            "A": 100,
            "B": 100,
            "C": 100
          },
          "IND": {
            "L": 100
          }
        }
      },
      "objective": {
        "EDU": {
          "w_r": 0.3,
          "w_p": 0.55,
          "w_c": 0.15
        },
        "IND": {
          "w_r": 0.6,
          "w_p": 0.2,
          "w_c": 0.2
        },
        "normalize": "per-month-pool-minmax"
      }
    },
    "locking": {
      "lock_period": 3,
      "hysteresis_delta": 0.04
    },
    "proximity_constraint": {
      "enabled": true,
      "max_distance": 15.0,
      "apply_after_month": 2,
      "min_candidates": 5
    },
    "evaluation": {
      "proximity_threshold": 15.0,
      "proximity_reward": 900.0,
      "distance_penalty_coef": 0.6,
      "size_bonus": {
        "S": 0,
        "M": 0,
        "L": 0
      },
      "council": {
        "enabled": true,
        "river_bypass": true,
        "proximity_strategy": "independent",
        "skip_if_no_candidates": true,
        "start_after_month": 6,
        "size_bonus": {
          "A": 2550,
          "B": 3550,
          "C": 4050
        },
        "other_side_bonus": {
          "A": 70.0,
          "B": 90.0,
          "C": 110.0
        },
        "proximity_scale": {
          "A": 0.12,
          "B": 0.1,
          "C": 0.1
        }
      },
      "ZoneAdd": {
        "near": 0.8,
        "mid": 0.3,
        "far": 0.0
      },
      "Rent": {
        "S": 25,
        "M": 45,
        "L": 70,
        "A": 20,
        "B": 40,
        "C": 60
      },
      "s_zone": {
        "near": 0.5,
        "mid": 0.2,
        "far": 0.0
      },
      "m_zone": {
        "near": 1.15,
        "mid": 1.0,
        "far": 0.9
      },
      "m_adj": {
        "on": 1.12,
        "off": 1.0
      },
      "RevBase_EDU": {
        "S": 160,
        "M": 530,
        "L": 360,
        "A": 570,
        "B": 870,
        "C": 1150
      },
      "Base_EDU": {
        "S": 1.2,
        "M": 2.8,
        "L": 5.5,
        "A": 1.3,
        "B": 1.8,
        "C": 2.4
      },
      "Add_EDU": {
        "S": 0.4,
        "M": 0.9,
        "L": 1.6,
        "A": 0.8,
        "B": 1.4,
        "C": 2.0
      },
      "Capacity_EDU": {
        "S": 60,
        "M": 120,
        "L": 240,
        "A": 120,
        "B": 300,
        "C": 500
      },
      "OPEX_EDU": {
        "S": 0.2,
        "M": 0.35,
        "L": 0.55,
        "A": 0.08,
        "B": 0.15,
        "C": 0.25
      },
      "BaseCost_EDU": {
        "S": 650,
        "M": 1150,
        "L": 2700
      },
      "PrestigeBase_EDU": {
        "S": 0.2,
        "M": 0.6,
        "L": 1.0,
        "A": 0.3,
        "B": 0.7,
        "C": 1.2
      },
      "Pollution_EDU": {
        "S": 0.2,
        "M": 0.4,
        "L": 0.6,
        "A": 0.1,
        "B": 0.2,
        "C": 0.3
      },
      "alpha": 0.12,
      "beta": 0.25,
      "Base_IND": {
        "S": 1.5,
        "M": 2.8,
        "L": 4.5
      },
      "Add_IND": {
        "S": 0.5,
        "M": 1.0,
        "L": 2.0
      },
      "Capacity_IND": {
        "S": 80,
        "M": 200,
        "L": 500
      },
      "GFA_k": {
        "S": 1.0,
        "M": 2.0,
        "L": 4.0
      },
      "PrestigeBase_IND": {
        "S": 0.2,
        "M": 0.1,
        "L": -0.1
      },
      "Pollution_IND": {
        "S": 0.6,
        "M": 0.9,
        "L": 1.2
      },
      "OPEX_IND": {
        "S": 100,
        "M": 180,
        "L": 300
      },
      "RewardLP_k_EDU_by_size": {
        "A": 0.35,
        "B": 0.4,
        "C": 0.38
      },
      "RewardLP_k": {
        "EDU": 0.2
      },
      "RiverPmax_pct": {
        "IND": 20.0,
        "EDU": 25.0
      },
      "RiverPmax_pct_EDU_by_size": {
        "A": 30,
        "B": 35,
        "C": 32
      },
      "p_market": 12.0,
      "u": 0.85,
      "c_opex": 0.3,
      "diversity_reward": {
        "enabled": true,
        "reward_per_unique_type": 0.1,
        "max_reward": 0.5,
        "types": [
          "A",
          "B",
          "C"
        ]
      },
      "river_distance_weight": {
        "A": 2.0,
        "B": 1.8,
        "C": 1.5
      }
    },
    "terrain_features": {
      "rivers": [
        {
          "coordinates": [],
          "land_price": {
            "enabled": true,
            "peak_value": 1.0,
            "decay_mode": "lorentzian",
            "gamma_px": 5.0,
            "max_influence_distance": 20.0
          }
        }
      ]
    }
  },
  "terrain_features": {
    "rivers": [
      {
        "coordinates": [
          [
            200.0,
            74.98098114
          ],
          [
            200.0,
            77.43850111
          ],
          [
            200.0,
            79.89602108
          ],
          [
            200.0,
            82.35354105
          ],
          [
            200.0,
            84.81106101
          ],
          [
            200.0,
            87.26858098
          ],
          [
            200.0,
            89.72610095
          ],
          [
            199.53685472,
            91.81722159
          ],
          [
            197.15700529,
            92.42974747
          ],
          [
            194.79807931,
            93.11849621
          ],
          [
            192.46130917,
            93.87905783
          ],
          [
            190.14744542,
            94.70674504
          ],
          [
            187.85680096,
            95.59668214
          ],
          [
            185.58923197,
            96.54391054
          ],
          [
            183.34421994,
            97.54344675
          ],
          [
            181.12089072,
            98.59035115
          ],
          [
            178.91807248,
            99.67976717
          ],
          [
            176.73433226,
            100.80695597
          ],
          [
            174.56801978,
            101.96729769
          ],
          [
            172.41566731,
            103.15335949
          ],
          [
            170.26988393,
            104.35128297
          ],
          [
            168.12260485,
            105.54651755
          ],
          [
            165.96577484,
            106.72440799
          ],
          [
            163.79155203,
            107.86983446
          ],
          [
            161.59256196,
            108.96688167
          ],
          [
            159.36222063,
            109.99858813
          ],
          [
            157.09519544,
            110.94681924
          ],
          [
            154.78798044,
            111.79237351
          ],
          [
            152.43957627,
            112.51542344
          ],
          [
            150.05222716,
            113.09678542
          ],
          [
            147.63341396,
            113.52907899
          ],
          [
            145.19321336,
            113.81747127
          ],
          [
            142.74062392,
            113.96804161
          ],
          [
            140.28345341,
            113.98686599
          ],
          [
            137.82853056,
            113.87978042
          ],
          [
            135.38180522,
            113.65222278
          ],
          [
            132.94857432,
            113.3091334
          ],
          [
            130.53361072,
            112.85489547
          ],
          [
            128.14132276,
            112.29330627
          ],
          [
            125.77589531,
            111.62756743
          ],
          [
            123.44117069,
            110.86102272
          ],
          [
            121.13664707,
            110.00777272
          ],
          [
            118.85689599,
            109.09024041
          ],
          [
            116.59456033,
            108.13047036
          ],
          [
            114.34106154,
            107.15009428
          ],
          [
            112.08711076,
            106.17076832
          ],
          [
            109.82318845,
            105.21475444
          ],
          [
            107.54011328,
            104.30556598
          ],
          [
            105.22969131,
            103.46851181
          ],
          [
            102.88569487,
            102.73102071
          ],
          [
            100.50511469,
            102.12241682
          ],
          [
            98.09030369,
            101.66864136
          ],
          [
            95.65235888,
            101.3615553
          ],
          [
            93.20210726,
            101.17526554
          ],
          [
            90.74642738,
            101.08303819
          ],
          [
            88.28908427,
            101.05861412
          ],
          [
            85.83164282,
            101.07670726
          ],
          [
            83.37439195,
            101.11302429
          ],
          [
            80.91707251,
            101.14402896
          ],
          [
            78.45958089,
            101.1466233
          ],
          [
            76.0026114,
            101.09787753
          ],
          [
            73.54829384,
            100.97492671
          ],
          [
            71.10042021,
            100.7591855
          ],
          [
            68.66311473,
            100.44593759
          ],
          [
            66.24071353,
            100.03302068
          ],
          [
            63.83797593,
            99.51789021
          ],
          [
            61.46022067,
            98.89768583
          ],
          [
            59.11336314,
            98.16929545
          ],
          [
            56.80405769,
            97.32947037
          ],
          [
            54.5397731,
            96.37496542
          ],
          [
            52.3288387,
            95.30271603
          ],
          [
            50.18048854,
            94.11007902
          ],
          [
            48.10478043,
            92.79513756
          ],
          [
            46.1102152,
            91.36007472
          ],
          [
            44.20081286,
            89.81346108
          ],
          [
            42.378799,
            88.16475811
          ],
          [
            40.64510937,
            86.42337169
          ],
          [
            38.99960849,
            84.59839113
          ],
          [
            37.44129665,
            82.69838422
          ],
          [
            35.96853391,
            80.73129096
          ],
          [
            34.57923206,
            78.70436845
          ],
          [
            33.27101051,
            76.62416862
          ],
          [
            32.04134154,
            74.49657552
          ],
          [
            30.88715436,
            72.3270848
          ],
          [
            29.79487237,
            70.12570637
          ],
          [
            28.74088381,
            67.90569653
          ],
          [
            27.70115535,
            65.67895313
          ],
          [
            26.65128123,
            63.45699184
          ],
          [
            25.5659611,
            61.25217205
          ],
          [
            24.41852388,
            59.07911603
          ],
          [
            23.1807323,
            56.95637248
          ],
          [
            21.82329578,
            54.90829888
          ],
          [
            20.31777593,
            52.96681934
          ],
          [
            18.6406178,
            51.17198236
          ],
          [
            16.78164268,
            49.56651507
          ],
          [
            14.76356681,
            48.16593342
          ],
          [
            12.6202236,
            46.9653962
          ],
          [
            10.38082229,
            45.95490174
          ],
          [
            8.06926269,
            45.12223982
          ],
          [
            5.70455519,
            44.45494876
          ],
          [
            3.30167612,
            43.94148474
          ],
          [
            0.87245675,
            43.57182225
          ],
          [
            0.0,
            41.8935182
          ],
          [
            0.0,
            39.43599823
          ],
          [
            0.0,
            36.97847826
          ],
          [
            0.0,
            34.52095829
          ],
          [
            0.0,
            32.06343832
          ],
          [
            1.98162322,
            31.95798179
          ],
          [
            4.32669117,
            32.31465908
          ],
          [
            6.69211585,
            32.750377
          ],
          [
            9.06405891,
            33.27019264
          ],
          [
            11.4299457,
            33.87871608
          ],
          [
            13.77865876,
            34.58025349
          ],
          [
            16.10045836,
            35.3789357
          ],
          [
            18.38663492,
            36.27876107
          ],
          [
            20.62906972,
            37.28353595
          ],
          [
            22.81979441,
            38.39658242
          ],
          [
            24.95167498,
            39.61854643
          ],
          [
            27.01851844,
            40.9475344
          ],
          [
            29.0142085,
            42.3811592
          ],
          [
            30.93268807,
            43.91656888
          ],
          [
            32.7680465,
            45.55041955
          ],
          [
            34.51461388,
            47.2788615
          ],
          [
            36.16703424,
            49.09751182
          ],
          [
            37.72038083,
            51.00147921
          ],
          [
            39.17024448,
            52.98538365
          ],
          [
            40.51282624,
            55.0434064
          ],
          [
            41.74583561,
            57.16891776
          ],
          [
            42.88332662,
            59.34717432
          ],
          [
            43.95336952,
            61.55944178
          ],
          [
            44.98385273,
            63.79046123
          ],
          [
            46.00248249,
            66.02693118
          ],
          [
            47.03775009,
            68.25572424
          ],
          [
            48.12015046,
            70.46194125
          ],
          [
            49.28345247,
            72.62644649
          ],
          [
            50.56558495,
            74.72246884
          ],
          [
            52.00804119,
            76.71106695
          ],
          [
            53.65140013,
            78.53631789
          ],
          [
            55.52227123,
            80.12655243
          ],
          [
            57.59579373,
            81.44227715
          ],
          [
            59.81540142,
            82.49407006
          ],
          [
            62.13246361,
            83.31024444
          ],
          [
            64.51114171,
            83.92529857
          ],
          [
            66.92711103,
            84.37309377
          ],
          [
            69.36463071,
            84.68388845
          ],
          [
            71.81384607,
            84.88369888
          ],
          [
            74.268753,
            84.99470992
          ],
          [
            76.72586503,
            85.03605814
          ],
          [
            79.18332505,
            85.02468613
          ],
          [
            81.64035443,
            84.97630318
          ],
          [
            84.0968913,
            84.90691617
          ],
          [
            86.55330873,
            84.83321774
          ],
          [
            89.01007238,
            84.77258943
          ],
          [
            91.46738621,
            84.74328506
          ],
          [
            93.9247513,
            84.76459563
          ],
          [
            96.38042866,
            84.85691868
          ],
          [
            98.83081349,
            85.04162144
          ],
          [
            101.26981268,
            85.34056087
          ],
          [
            103.68822686,
            85.77510368
          ],
          [
            106.07350703,
            86.36457593
          ],
          [
            108.4123932,
            87.11745103
          ],
          [
            110.7037243,
            88.00510288
          ],
          [
            112.95483089,
            88.99063282
          ],
          [
            115.17661592,
            90.04079037
          ],
          [
            117.38187955,
            91.12530879
          ],
          [
            119.58426766,
            92.21566868
          ],
          [
            121.79756278,
            93.28365356
          ],
          [
            124.03502778,
            94.29987306
          ],
          [
            126.30852769,
            95.23240619
          ],
          [
            128.62713931,
            96.04583117
          ],
          [
            130.99505717,
            96.701196
          ],
          [
            133.40729938,
            97.16733445
          ],
          [
            135.848544,
            97.44453728
          ],
          [
            138.30362728,
            97.54153312
          ],
          [
            140.75960869,
            97.46870262
          ],
          [
            143.2057909,
            97.23712757
          ],
          [
            145.6335076,
            96.85786455
          ],
          [
            148.03584167,
            96.34144026
          ],
          [
            150.40722472,
            95.69755388
          ],
          [
            152.74315374,
            94.93490338
          ],
          [
            155.03985045,
            94.06112751
          ],
          [
            157.29404212,
            93.08285929
          ],
          [
            159.50536158,
            92.01106578
          ],
          [
            161.67925819,
            90.86514339
          ],
          [
            163.82353325,
            89.66461601
          ],
          [
            165.9473463,
            88.42819293
          ],
          [
            168.06071595,
            87.17397352
          ],
          [
            170.17411838,
            85.91981013
          ],
          [
            172.29814087,
            84.68374838
          ],
          [
            174.44311959,
            83.48448475
          ],
          [
            176.61869624,
            82.34176989
          ],
          [
            178.83322675,
            81.27666464
          ],
          [
            181.09288346,
            80.31118687
          ],
          [
            183.39536762,
            79.45268216
          ],
          [
            185.73005542,
            78.68587264
          ],
          [
            188.08769562,
            77.99264396
          ],
          [
            190.46084803,
            77.35438971
          ],
          [
            192.84349649,
            76.75245638
          ],
          [
            195.2305936,
            76.16836239
          ],
          [
            197.61759277,
            75.58386925
          ],
          [
            200.0,
            74.98098114
          ]
        ]
      }
    ]
  }
}